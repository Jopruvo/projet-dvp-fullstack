<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Accueil</title>
    <link rel="stylesheet" href="/stylesheets/nouveauThread.css">
</head>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<body>

    <header>
        <div class="logo_overlay">
            <a><img id="logo-main" src="/images/forum_logo_trans.png"></a>
        </div>
        <div class="overlay">
            <a href="http://localhost:3000/accueil"><img id="image-accueil" src="/images/accueil.png"></a>
            <a href="http://localhost:3000/profil"><img id="image-profil" src="/images/profil.png"></a>
        </div>
    </header>

    <div class="create_thread">
        <h1>Créer un nouveau thread</h1>
    </div>
    <div class="main_body">
        <label for="titreCreation">Titre</label>
        <br />
        <input id="titreCreation">
        <br />
        <label for="contenuCreation">Contenu</label>
        <br />
        <input id="contenuCreation">
    </div>
    <div class="button_thread">
        <br />
        <a><img id="post_thread_button" onclick="createThread()" src="/images/thread_button.png"></a>
        <br />
    </div>
    <hr />
    <div class="bottom_page">
        <p id="credit">"Forum" est une marque déposée par Polytech Annecy-Chambéry, en particulier par les développeurs
            du forum TAKAHASHI Vincent, RISS Ryan et PRUVOST Jordan</p>
    </div>
</body>

</html>

<script>
    /**
     * On veut créer un thread et mettre le résultat dans le champ associé
     */
    function createThread() {

        // On récupère les données du thread à créer
        var titre = document.getElementById("titreCreation").value;
        var contenu = document.getElementById("contenuCreation").value;


        axios.post("http://localhost:3000/api/thread", [titre, contenu]).then(function (response) {
            document.getElementById("resultatCreateThread").innerHTML = JSON.stringify(response.data);
            window.location.replace('http://localhost:3000/accueil');
        }).catch((err) => console.log(err));
    }

</script>
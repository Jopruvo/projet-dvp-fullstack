<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Connexion</title>
    <link rel="stylesheet" href="/stylesheets/connexion.css">
</head>

<!-- On importe Axios -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<body>

    <header>
        <div class="logo_overlay">
            <a><img id="logo-main" src="/images/forum_logo_trans.png"></a>
        </div>
        <div class="overlay">
            <a href="http://localhost:3000/inscription"><img id="image-inscription"
                    src="/images/sign_in_button.png"></a>
        </div>
    </header>

    <div class="main_body">
        <div class="log_box">
            <h1>Connexion</h1>
            <div>
                <label for="identifiantVerif">Identifiant</label>
                <br />
                <input id="identifiantVerif">
                <br />
                <label for="mdpVerif">Mot de passe</label>
                <br>
                <input type="password" id="mdpVerif">
            </div>
            <div class="connexion_button">
                <br />
                <a><img id="login" onclick="verifyUser()" src="/images/login_button.png"></a>
            </div>
        </div>
    </div>

    <div class="bottom_page">
        <p id="credit">"Forum" est une marque déposée par Polytech Annecy-Chambéry, en particulier par les
            développeurs
            du forum TAKAHASHI Vincent, RISS Ryan et PRUVOST Jordan</p>
    </div>

    <br />
    <br />

</body>

</html>

<script>

    function verifyUser() {

        // On récupère les données de l'utilisateur 
        var identifiant = document.getElementById("identifiantVerif").value;
        var mdp = document.getElementById("mdpVerif").value;


        axios.post("http://localhost:3000/api/verifyUser", [identifiant, mdp]).then(function (response) {
            if (response.data != "identifiant ou mdp incorrect") {
                window.location.replace('http://localhost:3000/accueil');
            }
            else {
                document.getElementById("resultatVerifyUser").innerHTML = response.data;
            }
        })
    }


</script>
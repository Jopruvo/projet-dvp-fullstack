<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Accueil</title>
</head>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<body>

<header>
<a href="http://localhost:3000/accueil">Accueil</a> 
<a href="http://localhost:3000/profil">Profil</a> 
<a href="http://localhost:3000/nouveauThread">Ecrire</a> 
</header>
        


    <p id="greet"></p>

    <p>Voici les posts les plus récents :</p>

    <p id="resultatReadAllThreads"></p>

    <br/>
    <button onclick="logout()">Déconnexion</button>

</body>
</html>

<script>
        
    recupererIdentifiant();
    

    function logout () {
        axios.delete("http://localhost:3000/api/session").then(function (response) {
            window.location.replace('http://localhost:3000/connexion');
        })
    }

    /**
     * On veut lire tous les utilisateurs et mettre le résultat dans le champ associé
     */
     function readAllThreads() {
        axios.get("http://localhost:3000/api/threads").then(function (response) {
            document.getElementById("resultatReadAllThreads").innerHTML = JSON.stringify(response.data);
        })
    }

    function recupererIdentifiant() {
        axios.post("http://localhost:3000/api/session").then(function (response) {
            document.getElementById("greet").innerHTML = "Bienvenue " + response.data.identifiant + ".";
        })
    }


</script>